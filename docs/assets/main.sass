@import "theme"

\:root
  @each $key, $value in $vars-light
    --#{$key}: #{$value}

@each $class, $vars in $classes-light
  .#{$class}
    @each $key, $value in $vars
      --#{$key}: #{$value}

*, *::before, *::after
  margin: 0
  padding: 0
  box-sizing: border-box
  line-height: 1.5
  overflow-wrap: anywhere

.sr-only
  clip: rect(0 0 0 0)
  clip-path: inset(50%)
  height: 1px
  overflow: hidden
  position: absolute
  white-space: nowrap
  width: 1px

.icon
  user-select: none
  font-size: 1em
  vertical-align: middle

button
  background: none
  border: none
  font: inherit
  color: inherit

.pill
  background: var(--colour)
  padding: 0.25em 0.5em
  border-radius: 1em
  margin-inline: 1em
  display: inline-flex
  align-items: center
  gap: 0.25em
  font-size: 0.75em
  .icon
    font-size: 1.5em

.text-clickable
  color: var(--link)
  &:hover
    color: var(--link-hover)

[aria-expanded=true] [data-for-expanded=false]
  display: none

[aria-expanded=false] [data-for-expanded=true]
  display: none

body
  background: var(--bg)
  color: var(--fg)
  font-family: $font-regular
  display: grid
  grid-template: "head head" 3em "nav content" auto / 30ch auto
  width: 100vw
  height: 100vh
  position: relative

header
  grid-area: head
  display: flex
  flex-direction: row
  border-bottom: var(--border)
  align-items: center
  background: var(--header)
  gap: 0.5em
  > *
    margin-inline: 0 !important
  h1
    font-weight: normal
    font-size: 1.25rem
  .logo
    height: 100%

.main-nav-toggle
  display: none
  .icon
    font-size: 1.5em

.main-nav-backdrop
  grid-area: nav
  .main-nav
    height: 100%
    border-right: var(--border)
    background: var(--sidebar)
    padding-block: 1em
    ul
      list-style: none
      margin-left: 0
      ul
        margin-left: 1.5em
        border-left: var(--dropdown-border)
    .nav-link, .toggle.no-content
      display: flex
      align-items: center
      margin: 0 0.5em
      a, .title
        flex: 1
        padding: 0.5rem 0.75rem
      .toggle, &.toggle
        cursor: pointer
        &[aria-expanded=false] .icon
          transform: rotate(-90deg)
        .icon
          display: block
          font-size: 1.5em
          padding: 0.5rem 0.75rem
          align-content: center
          transition: transform 250ms ease-out
      a, .toggle, &.toggle
        &:hover, &:focus
          background: var(--bg-hover)
    .section-list.collapsed
        display: none

nav
  overflow-y: auto
  a
    color: inherit
    text-decoration: none

.active
  color: var(--link)
  font-weight: bold

.content
  padding-inline: 1em
  overflow-y: auto
  .content-inner
    margin-right: 39ch
    > main
      max-width: 100ch
      margin: 1em auto 25vh auto
      article
        @import "content"
        margin-top: 1em
        \:first-child
          margin-top: 0

main
  text-align: justify

.edit-link
  color: var(--link)
  text-decoration: none
  &:hover
    color: var(--link-hover)
  .icon
    font-size: 1.5em
    margin-right: 0.25em
    margin-block: 0.5em

.table-of-contents-header
  display: none
  margin-inline: 0.5em
  border: var(--dropdown-border)
  padding: 0.5em 1em
  .icon
    font-size: 1.5em
    margin-right: 0.25em

.table-of-contents
  width: 35ch
  position: fixed
  right: 2em
  top: 4em
  padding-left: 1em
  border-left: var(--dropdown-border)
  text-align: left
  max-height: calc(100vh - 5em)
  ol
    list-style-type: none
  ol ol
    margin-left: 2em
  a
    display: block
    padding-block: 0.3em
    &:hover
      color: var(--link-hover)

.breadcrumbs
  margin-bottom: 0.5em
  font-size: 1.1em
  ol
    display: flex
    flex-direction: row
    align-items: center
    height: 2.5em
    list-style-type: none
    vertical-align: middle
  a
    color: var(--fg)
    text-decoration: none
    .icon
      font-size: 1.25em
    &:hover
      color: var(--link-hover)
    &.current:not(:hover)
      color: var(--link)
  .breadcrumbsArrow
      font-size: 1.5em
      margin-inline: 0.2em
      vertical-align: middle
      color: var(--breadcrumb-chevrons)
      font-weight: bold

@media screen and (max-width: 140ch)
  .content .content-inner
    margin-right: 1ch

  .table-of-contents-header
    display: block

  .table-of-contents
    display: block
    position: static
    width: unset
    max-height: unset
    border: var(--dropdown-border)
    padding: 1em
    margin: 0 0.5em 0.5em 0.5em

@media screen and (max-width: 90ch)
  body
    grid-template: "head" 3em "content" auto / auto

  .main-nav-toggle
    display: block

  .main-nav-backdrop
    grid-area: content
    position: absolute
    height: 100%
    width: 100%
    backdrop-filter: blur(2px) brightness(70%)
    transition: backdrop-filter 250ms ease-in-out, visibility 250ms
    .main-nav
      width: 30ch
      transition: transform 250ms ease-in-out
    &.collapsed
      visibility: hidden
      backdrop-filter: none
      pointer-events: none
      tab-index: -1
      .main-nav
        transform: translateX(-30ch)

  .content .content-inner
    margin-right: 0

@media screen and (max-width: 65ch)
  .development
    padding-inline: 0.25em
    .label
      display: none

@media screen and (prefers-color-scheme: dark)
  \:root
    @each $key, $value in $vars-dark
      --#{$key}: #{$value}
  @each $class, $vars in $classes-dark
    .#{$class}
      @each $key, $value in $vars
        --#{$key}: #{$value}

@media print
  body
    display: block
  header
    height: 3em
  .main-nav
    display: none
  .content
    max-height: unset
    .content-inner
      margin: 0
      > main
        max-width: unset
        article
          a:hover
            text-decoration: none
            color: var(--link)
  .table-of-contents
    display: block
    position: static
    width: 100%
    max-height: unset
    border-left: none
    padding: 0
    margin-block: 2em
    &::before
      content: "Contents"
      font-weight: bold
      font-size: 1.5em
      display: block
    a
      padding-block: 0
      &:hover
        color: inherit
    ol
      list-style-type: decimal
      margin-left: 2.5em
      ol
        list-style-type: lower-alpha
        ol
          list-style-type: lower-roman
  .active
    color: inherit
    font-weight: normal
  .edit-link
    display: none
  .breadcrumbs
    a
      &:hover
        color: var(--fg)
      &.current:hover
        color: var(--link)
